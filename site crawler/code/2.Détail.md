# Crawler

Pas à pas

## Analyse

1. On a une URL. On la stocke dans un objet de type `URLWords` qui s'appelle `niveau1`.
2. On récupère la page associée.
3. On la traite avec BeautifulSoup.
  * On peut créer un objet de type `page` avec ça.
4. On récupère tous les liens et on les mets dans une liste, `liens1`.
5. On récupère les mots dans la page et leur occurrence.
6. On boucle sur tous les mots pour avoir la somme des occurrences.
7. On calcule le pourcentage de présence de chaque mot.
8. On ouvre une boucle qui prend toutes les url contenues dans `liens1`. Pour chaque url dans `liens1`:
  1. On la stocke dans un objet de type `URLWords` qui s'appelle `1` (puis `2`...).
  2. On récupère la page associée.
  3. On la traite avec BeautifulSoup.
  4. On récupère tous les liens et on les mets dans une liste, `liens2`.
  5. On récupère les mots dans la page et leur occurrence.
  6. On boucle sur tous les mots pour avoir la somme des occurrences.
  7. On calcule le pourcentage de présence de chaque mot.
  8. On stocke l'objet de type `URLWords` dans `niveau2`.
9. Une fois la boucle finie, on la refait avec la liste `liens2`. Pour chaque url:
  1. On la stocke dans un objet de type `URLWords` qui s'appelle `1` (puis `2`...).
  2. On récupère la page associée.
  3. On la traite avec BeautifulSoup.
  4. On récupère les mots dans la page et leur occurrence.
  5. On boucle sur tous les mots pour avoir la somme des occurrences.
  6. On calcule le pourcentage de présence de chaque mot.
  7. On stocke l'objet de type `URLWords` dans `niveau2`.

## Affichage

Une fois l'analyse finie, on affiche les résultats. Pour ce faire:

1. On dispose d'un template qui représente un résultat d'analyse d'une page.
*Exemple*:
```
URL: {{ici va la variable url}}
mot 1: {{ici va le mot le plus présent}}
  occurrences: {{ici va le nombre d'occurrences}}
  pourcentage: {{ici va le pourcentage d'occurrences}}
mot 2: {{ici va le deuxième mot le plus présent}}
  occurrences: {{ici va le nombre d'occurrences}}
  pourcentage: {{ici va le pourcentage d'occurrences}}
mot 3: {{ici va le troisième mot le plus présent}}
  occurrences: {{ici va le nombre d'occurrences}}
  pourcentage: {{ici va le pourcentage d'occurrences}}
```
2. On récupère les variables de niveau1
```
URL: {{niveau1.url}}
mot 1: {{niveau1.wordsitems[0][0]}}
  occurrences: {{niveau1.wordsitems[0][1]}}
  pourcentage: {{niveau1.wordsitems[0][2]}}
mot 2: {{niveau1.wordsitems[1][0]}}
    occurrences: {{niveau1.wordsitems[1][1]}}
    pourcentage: {{niveau1.wordsitems[1][2]}}
mot 3: {{niveau1.wordsitems[2][0]}}
      occurrences: {{niveau1.wordsitems[2][1]}}
      pourcentage: {{niveau1.wordsitems[2][2]}}
```
Pour les pages suivantes il est nécessaire de tester si les mots présents sont ceux du `niveau1`. Détail des opérations à suivre.
